<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>RomRaider :: View topic - How To: Get started with IDA and disassembly</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code,
.quote {
	font-size: smaller;
	border: black solid 1px;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

<script type="text/javascript">
// <![CDATA[
	/**
	* Resize too large images
	*/
	var reimg_maxWidth = 640, reimg_maxHeight = 480, reimg_relWidth = 100;
	var reimg_swapPortrait = true;
	var reimg_loadingImg = "./images/spacer.gif";
	var reimg_loadingStyle = "width: 16px; height: 16px; background: url(./styles/fisubsilver2/imageset/icon_reimg_loading.gif) top left no-repeat; filter: Alpha(Opacity=45); opacity: .45;";
	var reimg_loadingAlt = "Loading...";
	
	var reimg_autoLink = true;
	
	var reimg_zoomImg = "./images/spacer.gif";
	var reimg_zoomStyle = "width: 18px; height: 15px; background: url(./styles/fisubsilver2/imageset/icon_reimg_zoom_in.gif) top left no-repeat; filter: Alpha(Opacity=45); opacity: .45;";
	var reimg_zoomHover = "filter: Alpha(Opacity=90); opacity: .90;";
	
	var reimg_zoomAlt = "Zoom in (real dimensions: %1$d x %2$d)";
	var reimg_zoomTarget = "_highslide";
	var reimg_ajax_url = "https://www.romraider.com/forum/reimg/reimg_ajax.php";

	function reimg(img, width, height)
	{
		if (window.reimg_version)
		{
			reimg_resize(img, width, height);
		}
	}
// ]]>
</script>

<script type="text/javascript" src="./reimg/reimg.js"></script>

	
<style type="text/css" media="screen, projection">
<!--
	
	.tablebg .tablebg .postbody .reimg-zoom { display: none; }
	
	.reimg { width: 10%; height: auto; visibility: visible; }
	
-->
</style>
	
<script type="text/javascript" src="./reimg/highslide/highslide-full.packed.js"></script>
<link rel="stylesheet" type="text/css" href="./reimg/highslide/highslide.css" />
	
<script type="text/javascript">
// <![CDATA[
	/**
	* Light box for resized images
	*/
	
	if (window.hs)
	{
		hs.graphicsDir = "./reimg/highslide/graphics/";
		// Language settings for Highslide JS
		hs.lang.cssDirection = "ltr";
		hs.lang.loadingText = "Loading...";
		hs.lang.loadingTitle = "Click to cancel";
		hs.lang.focusTitle = "Click to bring to front";
		hs.lang.fullExpandTitle = "Expand to actual size (f)";
		hs.lang.creditsText = "Powered by <em>Highslide JS</em>";
		hs.lang.creditsTitle = "Go to the Highslide JS homepage";
		hs.lang.previousText = "Previous";
		hs.lang.nextText = "Next";
		hs.lang.moveText = "Move";
		hs.lang.closeText = "Close";
		hs.lang.closeTitle = "Close (esc)";
		hs.lang.resizeTitle = "Resize";
		hs.lang.playText = "Play";
		hs.lang.playTitle = "Play slideshow (spacebar)";
		hs.lang.pauseText = "Pause";
		hs.lang.pauseTitle = "Pause slideshow (spacebar)";
		hs.lang.previousTitle = "Previous (arrow left)";
		hs.lang.nextTitle = "Next (arrow right)";
		hs.lang.moveTitle = "Move";
		hs.lang.number = "Image %1 of %2";
		hs.lang.restoreTitle = "Click to close image, click and drag to move. Use arrow keys for next and previous.";
		hs.dimmingOpacity = 0.75;
	}
	
// ]]>
</script>

	
<script type="text/javascript">
// <![CDATA[
	reimg_loading('./styles/fisubsilver2/imageset/icon_reimg_loading.gif');
// ]]>
</script>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">RomRaider</span><br /><span class="gensmall"><a href="https://www.romraider.com/forum/">https://www.romraider.com/forum/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">How To: Get started with IDA and disassembly</span><br /><span class="gensmall"><a href="https://www.romraider.com/forum/viewtopic.php?f=40&amp;t=6303">https://www.romraider.com/forum/viewtopic.php?f=40&amp;t=6303</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>12</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Fiend</b> [ Tue Jun 22, 2010 7:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">NSFW wrote:</div><div class="quotecontent">I just updated the floating-point value conversion utility in 2nd message to make it a little more usable.</div><br /><br />I'm sure you guys already know this but you can add float conversion to the data type selection rotation (i.e. when you press D, byte, word, dword, etc).  I added float conversion and now you can convert DWORDs to floats by pressing D.  You can set this up by pressing ALT-D then checking the &quot;float&quot; option on the right of the dialog box.<br /><br />Alternatively, just press ALT-D, then F and it will immediately convert to float.<br /><br />I've been going through the 3D tables and doing this and haven't encountered any problems yet.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b style="color: #777777">dschultz</b> [ Tue Jun 22, 2010 8:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks.  I don't know how many times I've looked at that data type carousel and I didn't clue in to that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b style="color: #006699">nsfw</b> [ Tue Jun 22, 2010 9:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks, I had no idea.  That sounds much better than copy-pasting to a 3rd-party tool.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b style="color: #006699">nsfw</b> [ Tue Jun 22, 2010 9:27 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">dschultz wrote:</div><div class="quotecontent"><div class="quotetitle">NSFW wrote:</div><div class="quotecontent">4) IDA will prompt you to create a RAM segment as you open the ROM. I've had no luck with this dialog box</div><br />This works for me every time.<br />When you use that dialogue box during the initial load, specify the RAM start address and length:<br />For 7055, Start is 0xFFFF6000 and Length is 0x7FFF<br />For 7058, Start is 0xFFFF0000 and Length is 0xBFFF<br />and check the box to make the RAM segment.</div><br /><br />I've added this to the instructions in the first post.<br /><br />I wonder if I just didn't check the box.   <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" class="reimg" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Fiend</b> [ Tue Jun 22, 2010 9:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You might have done what I was doing at first.  I was entering the end address as the length, so 0xFFFFBFFF instead of 0x0000BFFF.  The input wants the <span style="font-style: italic">length</span> of data, not the end address. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" class="reimg" /><br /><br /><div class="quotetitle">NSFW wrote:</div><div class="quotecontent"><div class="quotetitle">dschultz wrote:</div><div class="quotecontent"><div class="quotetitle">NSFW wrote:</div><div class="quotecontent">4) IDA will prompt you to create a RAM segment as you open the ROM. I've had no luck with this dialog box</div><br />This works for me every time.<br />When you use that dialogue box during the initial load, specify the RAM start address and length:<br />For 7055, Start is 0xFFFF6000 and Length is 0x7FFF<br />For 7058, Start is 0xFFFF0000 and Length is 0xBFFF<br />and check the box to make the RAM segment.</div><br /><br />I've added this to the instructions in the first post.<br /><br />I wonder if I just didn't check the box.   <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" class="reimg" /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Fiend</b> [ Tue Jun 22, 2010 4:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I just want to make sure I'm looking at the start of the pointers to the SSM handlers.<br /><br />I found the ECU ID, traced back to the first reference, which was marked as a loc_ (location?).  From there I marked all the loc_ as functions, including the one above, which I assume is the first SSM handler.<br /><br /><span style="font-size: 85%; line-height: normal"><div class="codetitle"><b>Code:</b></div><div class="codecontent">ROM:00053ADA ; =============== S U B R O U T I N E =======================================<br />ROM:00053ADA<br />ROM:00053ADA ; Attributes: noreturn<br />ROM:00053ADA<br />ROM:00053ADA sub_53ADA:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; DATA XREF: ROM:off_5C110o<br />ROM:00053ADA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mov.l&nbsp; &nbsp;off_53BF0, r2 ; unk_FFFF8B63<br />ROM:00053ADC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rts<br />ROM:00053ADE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mov.b&nbsp; &nbsp;@r2, r0<br />ROM:00053ADE ; End of function sub_53ADA<br />ROM:00053ADE<br />ROM:00053AE0<br />ROM:00053AE0 ; =============== S U B R O U T I N E =======================================<br />ROM:00053AE0<br />ROM:00053AE0 ; Attributes: noreturn<br />ROM:00053AE0<br />ROM:00053AE0 sub_53AE0:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; DATA XREF: ROM:0005C114o<br />ROM:00053AE0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mov.l&nbsp; &nbsp;off_53BF4, r2 ; StartOfEcuId<br />ROM:00053AE2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rts<br />ROM:00053AE4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mov.b&nbsp; &nbsp;@r2, r0<br />ROM:00053AE4 ; End of function sub_53AE0<br />...<br /></div></span><br /><br />From there, I followed the first XREF.  That led me to what I think is the array of pointers:<br /><br /><span style="font-size: 85%; line-height: normal"><div class="codetitle"><b>Code:</b></div><div class="codecontent">ROM:0005C110 StartOfPtrsToSSMHandlers:.data.l sub_53ADA ; DATA XREF: sub_55EF8+12o<br />ROM:0005C110&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; ROM:off_55FCCo ...<br />ROM:0005C114&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l sub_53AE0<br />ROM:0005C118&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l sub_53AE6<br />ROM:0005C11C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l sub_53AEC<br />ROM:0005C120&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l sub_53AF2<br />ROM:0005C124&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l sub_53AF8<br />ROM:0005C128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l sub_53ACE<br />ROM:0005C12C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l sub_53B02<br />...<br /></div></span><br /><br />I ran XmlToIdc for stdparam and passed in 5C110 as the SSM handlers array address.  After running the command, that section turns into:<br /><br /><span style="font-size: 85%; line-height: normal"><div class="codetitle"><b>Code:</b></div><div class="codecontent">ROM:0005C110 StartOfPtrsToSSMHandlers:.data.l sub_53ADA ; DATA XREF: sub_55EF8+12o<br />ROM:0005C110&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; ROM:off_55FCCo ...<br />ROM:0005C114 PtrSsmGetEcuIdByte1:.data.l SsmGetEcuIdByte1<br />ROM:0005C118 PtrSsmGetEcuIdByte2:.data.l SsmGetEcuIdByte2<br />ROM:0005C11C PtrSsmGetEcuIdByte3:.data.l SsmGetEcuIdByte3<br />ROM:0005C120 PtrSsmGetEcuIdByte4:.data.l SsmGetEcuIdByte4<br />ROM:0005C124 PtrSsmGetEcuIdByte5:.data.l SsmGetEcuIdByte5<br />ROM:0005C128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l sub_53ACE<br />ROM:0005C12C PtrSsmGetEngineLoadRelative:.data.l SsmGetEngineLoadRelative<br />ROM:0005C130 PtrSsmGetCoolantTemperature:.data.l SsmGetCoolantTemperature<br />ROM:0005C134 PtrSsmGetAFCorrection1:.data.l SsmGetAFCorrection1<br />ROM:0005C138 PtrSsmGetAFLearning1:.data.l SsmGetAFLearning1<br />...<br />ROM:0005C22C PtrSsmGetAFSensor2:.data.l SsmGetAFSensor2<br />ROM:0005C230&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l SsmGetSCVStep<br />ROM:0005C234&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l SsmGetSCVStep<br />ROM:0005C238 PtrSsmGetGearPosition:.data.l SsmGetSCVStep<br />ROM:0005C23C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l SsmGetSCVStep<br />ROM:0005C240&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l SsmGetSCVStep<br />ROM:0005C244&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l SsmGetSCVStep<br />ROM:0005C248&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l SsmGetSCVStep<br />ROM:0005C24C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l SsmGetSCVStep<br />ROM:0005C250&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.data.l SsmGetSCVStep<br /><br /></div></span><br /><br />Note: SsmGetEcuIdByteN were manually added (because I assume that's what those functions do.)<br /><br />What is SsmGetSCVStep?<br /><br />There are also a few unk_ references between various known SSM handlers.  Should I follow the reference to these unk_ locations and mark them as functions, assuming that they are unknown SSM handlers?<br /><br />Thanks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b style="color: #006699">nsfw</b> [ Tue Jun 22, 2010 7:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Apparently my guidance is readable, because you did it all correctly.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" class="reimg" /><br /><br />You're right about the SsmGetEcuIdByteN stuff too.  <br /><br />The only thing that's amiss here is the large number of SsmGetSCVStep pointers.  That's actually something that I (manually) named SsmNotImplemented.  Probably there's an SSM parameter for SCVStep which is not implemented in your ROM, so the names got mixed up.<br /><br />I have no idea what the SCV stands for.  Something Control Valve perhaps?<br /><br />EDITED. I overlooked this earlier...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">There are also a few unk_ references between various known SSM handlers. Should I follow the reference to these unk_ locations and mark them as functions, assuming that they are unknown SSM handlers?</div><br /><br />Yes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Sasha_A80</b> [ Tue Jun 22, 2010 8:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Have a nice trip:<br /><br />There are 2 empty returns in SSM_READ_LUT.<br /><br />The first one returns h'FF<br />The second  one returns h'00 <br /><br />ROM:00037CB0 SSM_READ_LUT:   .data.l SSM_READ_@000   ; DATA XREF: ROM:off_2D0AC<br />ROM:00037CB0                                         ; / Read SSM LUT<br />ROM:00037CB4                 .data.l SSM_READ_ECUID_0<br />ROM:00037CB8                 .data.l SSM_READ_ECUID_1<br />ROM:00037CBC                 .data.l SSM_READ_ECUID_2<br />ROM:00037CC0                 .data.l SSM_READ_ECUID_3<br />ROM:00037CC4                 .data.l SSM_READ_ECUID_4<br />ROM:00037CC8                 .data.l LUT_READ_00<br />ROM:00037CCC                 .data.l LUT_READ_FF<br />ROM:00037CD0                 .data.l SSM_READ_COOLANT<br /><br />ROM:0002B46C ; ---------------------------------------------------------------------------<br />ROM:0002B46C<br />ROM:0002B46C SSM_READ_ECUID_4:                       ; DATA XREF: ROM:00037CC4<br />ROM:0002B46C                 mov.l   @(h'268,pc), r2 ; [0002B6D8] = byte_60118<br />ROM:0002B46E                 rts<br />ROM:0002B470                 mov.b   @r2, r0<br />ROM:0002B472 ; ---------------------------------------------------------------------------<br />ROM:0002B472<br />ROM:0002B472 LUT_READ_00:                            ; DATA XREF: ROM:00037CC8<br />ROM:0002B472                                         ; ROM:00037F5C ...<br />ROM:0002B472                 mov.l   @(h'268,pc), r3 ; [0002B6DC] = byte_37CAC ; =h'00<br />ROM:0002B474                 rts<br />ROM:0002B476                 mov.b   @r3, r0<br />ROM:0002B478 ; ---------------------------------------------------------------------------<br />ROM:0002B478<br />ROM:0002B478 LUT_READ_FF:                            ; DATA XREF: ROM:00037CCC<br />ROM:0002B478                                         ; ROM:00037CDC...<br />ROM:0002B478                 mov.l   @(h'264,pc), r2 ; [0002B6E0] = byte_37CAD; =h'FF<br />ROM:0002B47A                 rts<br />ROM:0002B47C                 mov.b   @r2, r0<br />ROM:0002B47E<br />ROM:0002B47E ; =============== S U B R O U T I N E =======================================<br />ROM:0002B47E<br />ROM:0002B47E<br />ROM:0002B47E SSM_READ_COOLANT:                       ; DATA XREF: ROM:00037CD0<br />ROM:0002B47E                 sts.l   pr, @-r15<br />ROM:0002B480                 mov.l   @(h'260,pc), r3 ; [0002B6E4] = GET_FLOAT_READ_COOLANT<br />ROM:0002B482<br />ROM:0002B482 loc_2B482:                              ; DATA XREF: sub_2B280+4A<br />ROM:0002B482                 jsr     @r3 ; GET_FLOAT_READ_COOLANT<br />ROM:0002B484                 nop<br />ROM:0002B486                 fmov    fr0, fr4<br />ROM:0002B488                 mova    @(h'25C,pc), r0 ; flt_2B6E8<br />ROM:0002B48A                 fldi1   fr5<br />ROM:0002B48C                 mov.l   @(h'25C,pc), r3 ; [0002B6EC] = MAKE_SSM_PARAM<br />ROM:0002B48E                 fmov.s  @r0, fr6<br />ROM:0002B490                 jmp     @r3 ; MAKE_SSM_PARAM<br />ROM:0002B492                 lds.l   @r15+, pr<br />ROM:0002B492 ; End of function SSM_READ_COOLANT

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b style="color: #777777">dschultz</b> [ Wed Jun 23, 2010 4:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">NSFW wrote:</div><div class="quotecontent">The only thing that's amiss here is the large number of SsmGetSCVStep pointers. <br /><br />EDITED. I overlooked this earlier...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">There are also a few unk_ references between various known SSM handlers. Should I follow the reference to these unk_ locations and mark them as functions, assuming that they are unknown SSM handlers?</div><br /><br />Yes.</div><br />I think it's because the last reference to that address was from this logger def switch.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter id=&quot;P81&quot; name=&quot;SCV Step&quot; desc=&quot;&quot; ecubyteindex=&quot;41&quot; ecubit=&quot;6&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;address&gt;0x000109&lt;/address&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;conversions&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;conversion units=&quot;steps&quot; expr=&quot;x&quot; format=&quot;0&quot; /&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/conversions&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/parameter&gt;<br /></div><br />I had something similar happen when I opened up the 2010 STi SE ROM.  I was checking the WRX def against it.  When I marked the SSM routines I got a lot of &quot;SsmGetIAM&quot; for the unsupported parameters.  So I changed the routine to &quot;SsmUnsupported&quot; so it was clear that that SSM parameter was not supported.<br /><br />I also found there are two routines that return 0x00 and 0xFF, the first two in the SSM base area.  The one that returns FF is the one I marked as SsmUnsupported.<br /><br />Edit: changed SsmGetUNKN to SsmUnsupported

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Fiend</b> [ Wed Jun 23, 2010 7:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Should the functions that return 00 and FF be labelled &quot;SsmUnknown&quot; or &quot;SsmUnsupported&quot;?  To me, an unknown SSM handler would be one that actually performs some work (data manipulation, scaling, etc) but we don't understand its usage, whereas if 00 and FF mean &quot;error&quot; or &quot;invalid&quot;, then that to me would better be labelled as &quot;SsmNotImplemented&quot;.<br /><br />Maybe I'm misunderstanding the intention of the code. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" class="reimg" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b style="color: #777777">dschultz</b> [ Wed Jun 23, 2010 8:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That makes sense.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b style="color: #006699">nsfw</b> [ Wed Jun 23, 2010 8:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I agree.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Fiend</b> [ Wed Jun 23, 2010 8:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Maybe I haven't gotten far enough yet, but I'm a bit confused by the 2D/3D table header info as detailed in the guide.  I don't see anything like that for the 2D/3D tables that I've looked at so far (e.g. TargetBoost).  The value portion of the data table converts directly to the 16-bit values.  Is the info for the table (location of row, column values, value data types, etc) kept somewhere else or do only certain tables have this header info?<br /><br />Sorry, lots of questions I know.  Thanks!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b style="color: #006699">nsfw</b> [ Wed Jun 23, 2010 9:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So I went looking for that conversion info and you know what?  I don't think it's correct. <br /><br />I'll dig into it a little further tonight.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Sasha_A80</b> [ Wed Jun 23, 2010 9:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How To: Get started with IDA and a 32-bit ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Fiend wrote:</div><div class="quotecontent">I'm a bit confused by the 2D/3D table header info as detailed in the guide.</div><br /><br />Early 32bit 2D\3D ecu table header may not contain some fields described.<br /><br />I see just row\colomn and 2\3 pointers to float arrays.<br /><br />2D table header:<br /><br />ROM:000547D0 CTS_CALIBRATION_547D0:.data.w h'1C      ; DATA XREF: ROM:off_7030<br />ROM:000547D2                 .data.w 0<br />ROM:000547D4                 .data.l CTS_VOLTAGE_5598C<br />ROM:000547D8                 .data.l CTS_TEMPERATURE_559FC<br />ROM:000547DC CTS_CALIBRATION_547DC:.data.w h'1E      ; DATA XREF: ROM:off_6F2C<br />ROM:000547DE                 .data.w 0<br />ROM:000547E0                 .data.l CTS_VOLTAGE_55A6C<br />ROM:000547E4                 .data.l CTS_TEMPERATURE_55AE4<br /><br /><br />3D table header:<br />ROM:000550D8 TARGET_AFR_550D8:.data.w h'10           ; DATA XREF: sub_18A54:off_18C14<br />ROM:000550DA                 .data.w h'12<br />ROM:000550DC                 .data.l h'6904C<br />ROM:000550E0                 .data.l h'6908C<br />ROM:000550E4                 .data.l h'690D4<br />ROM:000550E8 TARGET_AFR_550E8:.data.w h'10           ; DATA XREF: ROM:off_18D30<br />ROM:000550EA                 .data.w h'12<br />ROM:000550EC                 .data.l ENGINE_LOAD_69554<br />ROM:000550F0                 .data.l ENGINE_SPEED_69594<br />ROM:000550F4                 .data.l TARGET_AFR_695DC<br />ROM:000550F8 COMPENSATION_550F8:.data.w h'D          ; DATA XREF: ROM:off_197A0<br />ROM:000550FA                 .data.w 8<br />ROM:000550FC                 .data.l h'69A5C<br />ROM:00055100                 .data.l h'69A90<br />ROM:00055104                 .data.l h'69AB0

		

		</td>
	</tr>
	</table>


<hr width="85%" />
<!--
	We request you retain the full copyright notice below including the link to www.phpbb.com.
	This not only gives respect to the large amount of time given freely by the developers
	but also helps build interest, traffic and use of phpBB3. If you (honestly) cannot retain
	the full copyright we ask you at least leave in place the "Powered by phpBB" line. If you
	refuse to include even this then support on our forums may be affected.

	The phpBB Group : 2006
// -->

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>12</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 9 hours [ <abbr title="Daylight Saving Time">DST</abbr> ]</span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB &copy; 2000, 2002, 2005, 2007 phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>